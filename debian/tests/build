#!/bin/sh

set -e

WORKDIR=$(mktemp -d)
trap "rm -rf $WORKDIR" 0 INT QUIT ABRT PIPE TERM
cd $WORKDIR
cat <<EOF > darttest.cpp
#include <dart/common/Timer.hpp>

using namespace dart::common;
int main()
{
   Timer timer1("Timer1");
   timer1.start();
   timer1.stop();
   return 0;
}
EOF

g++ -o darttest darttest.cpp `pkg-config --cflags --libs dart`
echo "build: OK"
[ -x darttest ]
./darttest
echo "run: OK"
